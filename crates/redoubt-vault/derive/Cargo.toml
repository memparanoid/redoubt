[package]
name = "redoubt-vault-derive"
authors = ["Federico Hoerth <memparanoid@gmail.com>"]
categories = ["cryptography", "memory-management"]
description = "Derive macros for redoubt-vault encrypted storage"
edition.workspace = true
keywords = ["vault", "encryption", "derive", "macro", "procedural"]
license.workspace = true
repository.workspace = true
version.workspace = true

[lib]
proc-macro = true
path = "src/lib.rs"

[features]
no_std = []
test-utils = []

[dependencies]
heck.workspace = true
proc-macro2.workspace = true
proc-macro-crate.workspace = true
quote.workspace = true
syn = { workspace = true, features = ["full", "parsing"] }

[dev-dependencies]
prettyplease.workspace  = true
trybuild.workspace      = true
redoubt-aead.workspace = true
redoubt-secret.workspace = true
redoubt-alloc.workspace = true
redoubt-codec.workspace = true
redoubt-vault-core = { workspace = true, features = ["test-utils"] }
redoubt-zero.workspace = true

# Only include insta on architectures where it compiles (cpufeatures constraint)
[target.'cfg(any(target_arch = "x86_64", target_arch = "x86", target_arch = "aarch64", target_arch = "loongarch64"))'.dev-dependencies]
insta = { version = "1.43.2", features = ["redactions"] }
